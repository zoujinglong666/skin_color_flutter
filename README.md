# 肤色识别分析器

一个基于Flutter开发的智能肤色识别应用，能够通过拍照或选择相册图片来分析人脸肤色，并进行冷暖调分类。

## 功能特性

### 📸 图片获取
- **拍照功能**：使用设备相机直接拍摄照片
- **相册选择**：从设备相册中选择已有照片
- **图片优化**：自动调整图片尺寸和质量以提高处理效率

### 👤 人脸检测
- 使用Google ML Kit进行高精度人脸检测
- 自动定位人脸区域
- 支持多种角度和光照条件下的人脸识别

### 🎨 肤色分析
- **智能区域选择**：自动选择脸颊区域进行肤色分析，避免眼睛、嘴唇、头发等区域的干扰
- **像素采样**：从左右脸颊区域采样大量像素点
- **噪声过滤**：过滤掉过亮或过暗的像素，避免高光和阴影影响
- **颜色平均**：计算采样像素的平均颜色值

### 🌡️ 冷暖调分类
基于科学的色彩理论进行肤色分类：

#### 色调类型
- **偏黄调 (Warm Yellow)**：适合暖色系妆容和服装
- **偏粉调 (Cool Pink)**：适合冷色系妆容和服装  
- **中性调 (Neutral)**：适合多种色系搭配

#### 冷暖分类
- **暖色调**：色相偏向黄色系
- **冷色调**：色相偏向粉色系
- **中性色调**：介于冷暖之间

### 📊 详细结果展示
- **颜色色块**：直观显示检测到的肤色
- **RGB数值**：红绿蓝三原色数值
- **HSV数值**：色相、饱和度、明度数值
- **HEX颜色码**：十六进制颜色代码
- **分类结果**：色调类型和冷暖分类
- **详细分析**：色相角度、饱和度百分比、明度百分比

## 技术实现

### 核心算法
1. **人脸检测**：使用Google ML Kit Face Detection API
2. **区域定位**：基于人脸边界框计算脸颊区域坐标
3. **像素采样**：从脸颊区域提取像素颜色值
4. **颜色处理**：RGB转HSV，计算平均值
5. **分类算法**：基于色相和红黄比值进行冷暖调判断

### 依赖包
- `image_picker`: 图片选择和相机功能
- `google_mlkit_face_detection`: Google ML Kit人脸检测
- `image`: 图片处理和像素操作

## 安装和运行

### 环境要求
- Flutter SDK >= 3.1.0
- Android SDK >= 21 (Android 5.0)
- iOS >= 11.0

### 安装步骤
1. 克隆项目到本地
```bash
git clone <项目地址>
cd skin_color
```

2. 安装依赖
```bash
flutter pub get
```

3. 运行应用
```bash
# Android
flutter run

# iOS
flutter run -d ios
```

### 权限配置
应用已自动配置以下权限：

**Android (android/app/src/main/AndroidManifest.xml)**
- `CAMERA`: 相机访问权限
- `READ_EXTERNAL_STORAGE`: 读取存储权限
- `WRITE_EXTERNAL_STORAGE`: 写入存储权限
- `INTERNET`: 网络权限（ML Kit需要）

**iOS (ios/Runner/Info.plist)**
- `NSCameraUsageDescription`: 相机使用说明
- `NSPhotoLibraryUsageDescription`: 相册访问说明

## 使用指南

### 基本操作
1. **启动应用**：打开肤色识别分析器
2. **选择图片**：点击"拍照"或"相册"按钮
3. **等待分析**：应用自动进行人脸检测和肤色分析
4. **查看结果**：查看肤色色块和详细分析数据

### 拍照建议
- 确保人脸清晰可见
- 选择光线充足的环境
- 避免强烈的阴影或高光
- 人脸尽量正对镜头
- 避免化妆过重影响肤色判断

### 结果解读
- **RGB数值**：用于数字化色彩管理
- **HSV数值**：更直观的色彩属性描述
- **HEX颜色码**：用于网页和设计软件
- **色调分类**：指导化妆品和服装选择
- **冷暖分类**：整体色彩搭配建议

## 应用场景

### 美妆领域
- 选择适合的粉底色号
- 确定眼影和口红色系
- 个人色彩诊断参考

### 服装搭配
- 选择适合的服装颜色
- 配饰色彩搭配建议
- 个人风格定位

### 摄影后期
- 肤色校正参考数据
- 色彩分级基准
- 人像美化指导

## 技术特点

### 算法优势
- **高精度检测**：基于Google ML Kit的先进算法
- **智能区域选择**：避免非肤色区域干扰
- **噪声过滤**：提高分析结果准确性
- **科学分类**：基于色彩理论的分类方法

### 性能优化
- **图片压缩**：自动调整图片尺寸减少处理时间
- **异步处理**：不阻塞UI线程
- **内存管理**：及时释放图片资源
- **错误处理**：完善的异常捕获和用户提示

## 注意事项

### 使用限制
- 需要清晰的人脸图片
- 光线条件会影响分析准确性
- 化妆可能影响真实肤色判断
- 图片质量影响检测效果

### 隐私保护
- 所有图片处理均在本地完成
- 不上传任何个人照片到服务器
- 不存储用户的图片数据
- 完全离线的肤色分析

## 更新日志

### v1.0.0
- 初始版本发布
- 基础拍照和相册选择功能
- Google ML Kit人脸检测集成
- 肤色分析和冷暖调分类
- 完整的结果展示界面

## 开发者信息

这是一个演示性的Flutter应用，展示了如何结合机器学习和图像处理技术实现智能肤色分析功能。

## 许可证

本项目仅供学习和演示使用。